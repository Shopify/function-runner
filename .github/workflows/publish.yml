name: Publish

on:
  release:
    types:
      - published
  workflow_dispatch:
    inputs:
      tag_name:
        description: "Tag name"
        required: true
        type: string

jobs:
  build-and-publish:
    uses: ./.github/workflows/build-and-publish.yml
    with:
      should_publish: true
      tag_name: ${{ inputs.tag_name || github.event.release.tag_name}}
